<!-- adapted from: https://traineq.org/imgui_bundle_online/projects/min_bundle_pyodide_app/demo_heart.source.txt -->
<!doctype html>
<html>
<head>
    wgpu-py on the HTML RenderCanvas canvas with Pyodide:<br>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.28.3/full/pyodide.js"></script>
</head>
<body>
<canvas id="canvas" width="640" height="480" style="background-color: lightgrey;"></canvas><br>
pixels got drawn!
<script type="text/javascript">
    async function main(){

        // fetch the file locally for easier scripting
        // --allow-file-access-from-files or local webserver
        // TODO: replace the actual code here (unless you have the module)
        // pythonCode = await (await fetch("compute_noop.py")).text();
        // pythonCode = await (await fetch("compute_matmul.py")).text();
        // pythonCode = await (await fetch("cube.py")).text();
        pythonCode = await (await fetch("triangle.py")).text();
        // pythonCode = await (await fetch("triangle_glsl.py")).text();
        

        // Load Pyodide
        let pyodide = await loadPyodide();
        pyodide.setDebug(true);

        await pyodide.loadPackage("micropip");
        const micropip = pyodide.pyimport("micropip");
        await micropip.install('numpy');
        // await micropip.install('rendercanvas');
        await micropip.install('../../../../../../../projects/pygfx-repos/rendercanvas/dist/rendercanvas-2.2.1-py3-none-any.whl'); // local wheel for auto testing
        await micropip.install('../dist/wgpu-0.24.0-py3-none-any.whl'); // from PyPI

        // Run the Python code async because some calls are async it seems.
        pyodide.runPythonAsync(pythonCode);
        // pyodide.runPython(pythonCode);
    }
    main();
</script>
</body>
</html>